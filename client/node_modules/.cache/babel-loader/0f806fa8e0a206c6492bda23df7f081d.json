{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\coding-files\\\\projects\\\\web-chat-app\\\\client\\\\src\\\\asset\\\\SettingsFolder\\\\ProfilePhotoSettingFolder\\\\ProfilePhotoSetting.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport './ProfilePhotoSetting.css';\nimport { FaUser } from 'react-icons/fa';\nimport axios from 'axios';\nimport { LoggedInNameContext } from '../../contextFolder/LoggedInNameContext';\nimport { ProfilePhotoChangeContext } from '../../contextFolder/ProfilePhotoChangeContext';\nimport imageCompression from 'browser-image-compression';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ProfilePhotoSetting() {\n  _s();\n\n  const {\n    loggedInNameValue,\n    setLoggedInNameValue\n  } = useContext(LoggedInNameContext);\n  const {\n    profilePhotoChangeValue,\n    setProfilePhotoChangeValue\n  } = useContext(ProfilePhotoChangeContext); //This handles the upload of profile picture\n\n  const [postImage, setPostImage] = useState({\n    myFile: \"\"\n  }); //getting response from the server on post request on profile picture\n\n  const [serverPostResponse, setServerPostResponse] = useState(); //making the value in serverPostResponse disappear after some seconds of display\n\n  useEffect(() => {\n    setProfilePhotoChangeValue(serverPostResponse);\n    setTimeout(() => {\n      setServerPostResponse(' ');\n    }, 7000);\n  }, [serverPostResponse]);\n\n  const createPost = async newImage => {\n    try {\n      await axios.post(\"http://localhost:4000/uploadProfilePhoto\", newImage).then(response => {\n        setServerPostResponse(response.data.result);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleSendImage = async () => {\n    createPost(postImage);\n    console.log(postImage);\n    console.log(\"uploaded\");\n  };\n\n  const handleFileUpload = async e => {\n    const file = e.target.files[0]; //let's compress the image using the library we installed\n\n    const options = {\n      maxSiszeMb: 0.2,\n      maxWidthOrHeight: 1920\n    };\n\n    try {\n      const compressedFile = await imageCompression(file, options);\n      const base64 = await convertToBase64(compressedFile\n      /*file*/\n      );\n      setPostImage({ ...postImage,\n        myFile: base64,\n        name: loggedInNameValue\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  function convertToBase64(file) {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      };\n\n      fileReader.onerror = error => {\n        reject(error);\n      };\n    });\n  } //This handles the change password\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-photo-setting-body\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Settings...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"setDiv\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"photo-change\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"profile photo: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: serverPostResponse\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pic-display\",\n          children: postImage.myFile ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: postImage.myFile,\n            width: \"200px\",\n            id: \"img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 46\n          }, this) : /*#__PURE__*/_jsxDEV(FaUser, {\n            id: \"FaUser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 101\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"imageSelect-and-sendBtn-div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"myFile\",\n            className: \"imageSelect\",\n            onChange: handleFileUpload,\n            accept: \"jpeg, .png, .jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSendImage,\n            className: \"photoBtn\",\n            children: \"save picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 13\n  }, this);\n}\n\n_s(ProfilePhotoSetting, \"MYLEtqRZcf+0TMvssKz17z+/bbA=\");\n\n_c = ProfilePhotoSetting;\nexport default ProfilePhotoSetting;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePhotoSetting\");","map":{"version":3,"names":["useContext","useEffect","useState","FaUser","axios","LoggedInNameContext","ProfilePhotoChangeContext","imageCompression","ProfilePhotoSetting","loggedInNameValue","setLoggedInNameValue","profilePhotoChangeValue","setProfilePhotoChangeValue","postImage","setPostImage","myFile","serverPostResponse","setServerPostResponse","setTimeout","createPost","newImage","post","then","response","data","result","error","console","log","handleSendImage","handleFileUpload","e","file","target","files","options","maxSiszeMb","maxWidthOrHeight","compressedFile","base64","convertToBase64","name","err","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","onerror"],"sources":["C:/Users/HP/Desktop/coding-files/projects/web-chat-app/client/src/asset/SettingsFolder/ProfilePhotoSettingFolder/ProfilePhotoSetting.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport './ProfilePhotoSetting.css'\r\nimport { FaUser } from 'react-icons/fa';\r\nimport axios from 'axios';\r\nimport { LoggedInNameContext } from '../../contextFolder/LoggedInNameContext';\r\nimport { ProfilePhotoChangeContext } from '../../contextFolder/ProfilePhotoChangeContext';\r\nimport imageCompression from 'browser-image-compression';\r\n\r\nfunction ProfilePhotoSetting () {\r\n\r\n      const { loggedInNameValue, setLoggedInNameValue } = useContext(LoggedInNameContext) \r\n\r\n      const { profilePhotoChangeValue, setProfilePhotoChangeValue } = useContext(ProfilePhotoChangeContext)\r\n\r\n      //This handles the upload of profile picture\r\n      const [postImage, setPostImage] = useState( {myFile : \"\"} )\r\n\r\n      //getting response from the server on post request on profile picture\r\n      const [serverPostResponse, setServerPostResponse] = useState()\r\n\r\n      //making the value in serverPostResponse disappear after some seconds of display\r\n      useEffect(() => {\r\n\r\n         setProfilePhotoChangeValue(serverPostResponse);\r\n\r\n         setTimeout(() => {\r\n\r\n            setServerPostResponse(' ');\r\n\r\n         }, 7000);\r\n\r\n      }, [serverPostResponse]);\r\n\r\n\r\n      const createPost = async (newImage) => {\r\n        try {\r\n\r\n            await axios.post(\"http://localhost:4000/uploadProfilePhoto\", newImage).then((response) => {\r\n\r\n                setServerPostResponse(response.data.result);\r\n\r\n            })\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n      }\r\n\r\n      const handleSendImage = async () => {\r\n        createPost(postImage)\r\n        console.log(postImage)\r\n        console.log(\"uploaded\")\r\n      }\r\n\r\n      const handleFileUpload = async (e) => {\r\n\r\n        const file = e.target.files[0]\r\n\r\n        //let's compress the image using the library we installed\r\n        const options = {\r\n            maxSiszeMb: 0.2,\r\n            maxWidthOrHeight: 1920\r\n        }\r\n\r\n        try{\r\n\r\n            const compressedFile = await imageCompression(file, options)\r\n\r\n            const base64 = await convertToBase64(compressedFile /*file*/)\r\n        \r\n            setPostImage({...postImage, myFile : base64, name: loggedInNameValue })\r\n\r\n        } catch (err) {\r\n\r\n            console.log(err)\r\n\r\n        }\r\n\r\n       \r\n     \r\n      }\r\n\r\n      function convertToBase64(file){\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const fileReader = new FileReader();\r\n\r\n            fileReader.readAsDataURL(file)\r\n\r\n            fileReader.onload = () => {\r\n\r\n                resolve(fileReader.result)\r\n\r\n            };\r\n\r\n            fileReader.onerror = (error) => {\r\n                reject(error)\r\n            }\r\n        })\r\n      }\r\n\r\n\r\n\r\n      //This handles the change password\r\n      \r\n  \r\n    return(\r\n\r\n            <div className=\"profile-photo-setting-body\">\r\n\r\n                <h1>Settings...</h1>\r\n\r\n                <div className=\"setDiv\">\r\n\r\n                    <div className=\"photo-change\">\r\n\r\n                        <p>profile photo: </p>\r\n\r\n                            <p>{serverPostResponse}</p>\r\n\r\n                        <div className=\"pic-display\">\r\n  \r\n                        { postImage.myFile ? <img src={postImage.myFile} width=\"200px\" id=\"img\"/> : <FaUser id=\"FaUser\"/> }\r\n\r\n                        </div>\r\n\r\n                        <div className=\"imageSelect-and-sendBtn-div\">\r\n                            <input type=\"file\" name=\"myFile\" className=\"imageSelect\" onChange={ handleFileUpload } accept=\"jpeg, .png, .jpg\"/> \r\n                            <button onClick={handleSendImage} className=\"photoBtn\">save picture</button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n\r\n\r\n\r\n          </div>\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default ProfilePhotoSetting;"],"mappings":"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"},"metadata":{},"sourceType":"module"}