{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\coding-files\\\\projects\\\\web-chat-app\\\\client\\\\src\\\\asset\\\\SettingsFolder\\\\ProfilePhotoSettingFolder\\\\ProfilePhotoSetting.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport './ProfilePhotoSetting.css';\nimport { FaUser } from 'react-icons/fa';\nimport axios from 'axios';\nimport { LoggedInNameContext } from '../../contextFolder/LoggedInNameContext';\nimport { ProfilePhotoChangeContext } from '../../contextFolder/ProfilePhotoChangeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ProfilePhotoSetting() {\n  _s();\n\n  const {\n    loggedInNameValue,\n    setLoggedInNameValue\n  } = useContext(LoggedInNameContext);\n  const {\n    profilePhotoChangeValue,\n    setProfilePhotoChangeValue\n  } = useContext(ProfilePhotoChangeContext); //This handles the upload of profile picture\n\n  const [postImage, setPostImage] = useState({\n    myFile: \"\"\n  }); //getting response from the server on post request on profile picture\n\n  const [serverPostResponse, setServerPostResponse] = useState(); //making the value in serverPostResponse disappear after some seconds of display\n\n  useEffect(() => {\n    setTimeout(() => {\n      setServerPostResponse(' ');\n    }, 7000);\n  }, [serverPostResponse]);\n\n  const createPost = async newImage => {\n    try {\n      await axios.post(\"http://localhost:4000/uploadProfilePhoto\", newImage).then(response => {\n        setServerPostResponse(response.data.result);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleSendImage = async () => {\n    createPost(postImage);\n    console.log(postImage);\n    console.log(\"uploaded\");\n  };\n\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    const base64 = await convertToBase64(file);\n    setPostImage({ ...postImage,\n      myFile: base64,\n      name: loggedInNameValue\n    });\n  };\n\n  function convertToBase64(file) {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      };\n\n      fileReader.onerror = error => {\n        reject(error);\n      };\n    });\n  } //This handles the change password\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-photo-setting-body\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Settings...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"setDiv\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"photo-change\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"profile photo: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: serverPostResponse\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pic-display\",\n          children: postImage.myFile ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: postImage.myFile,\n            width: \"200px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 46\n          }, this) : /*#__PURE__*/_jsxDEV(FaUser, {\n            id: \"FaUser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 92\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"imageSelect-and-sendBtn-div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"myFile\",\n            className: \"imageSelect\",\n            onChange: handleFileUpload,\n            accept: \"jpeg, .png, .jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSendImage,\n            className: \"photoBtn\",\n            children: \"save picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 13\n  }, this);\n}\n\n_s(ProfilePhotoSetting, \"MYLEtqRZcf+0TMvssKz17z+/bbA=\");\n\n_c = ProfilePhotoSetting;\nexport default ProfilePhotoSetting;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePhotoSetting\");","map":{"version":3,"names":["useContext","useEffect","useState","FaUser","axios","LoggedInNameContext","ProfilePhotoChangeContext","ProfilePhotoSetting","loggedInNameValue","setLoggedInNameValue","profilePhotoChangeValue","setProfilePhotoChangeValue","postImage","setPostImage","myFile","serverPostResponse","setServerPostResponse","setTimeout","createPost","newImage","post","then","response","data","result","error","console","log","handleSendImage","handleFileUpload","e","file","target","files","base64","convertToBase64","name","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","onerror"],"sources":["C:/Users/HP/Desktop/coding-files/projects/web-chat-app/client/src/asset/SettingsFolder/ProfilePhotoSettingFolder/ProfilePhotoSetting.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport './ProfilePhotoSetting.css'\r\nimport { FaUser } from 'react-icons/fa';\r\nimport axios from 'axios';\r\nimport { LoggedInNameContext } from '../../contextFolder/LoggedInNameContext';\r\nimport { ProfilePhotoChangeContext } from '../../contextFolder/ProfilePhotoChangeContext';\r\n\r\nfunction ProfilePhotoSetting () {\r\n\r\n      const { loggedInNameValue, setLoggedInNameValue } = useContext(LoggedInNameContext) \r\n\r\n      const { profilePhotoChangeValue, setProfilePhotoChangeValue } = useContext(ProfilePhotoChangeContext)\r\n\r\n      //This handles the upload of profile picture\r\n      const [postImage, setPostImage] = useState( {myFile : \"\"} )\r\n\r\n      //getting response from the server on post request on profile picture\r\n      const [serverPostResponse, setServerPostResponse] = useState()\r\n\r\n      //making the value in serverPostResponse disappear after some seconds of display\r\n      useEffect(() => {\r\n\r\n        \r\n         setTimeout(() => {\r\n\r\n            setServerPostResponse(' ');\r\n\r\n         }, 7000);\r\n\r\n      }, [serverPostResponse]);\r\n\r\n\r\n      const createPost = async (newImage) => {\r\n        try {\r\n\r\n            await axios.post(\"http://localhost:4000/uploadProfilePhoto\", newImage).then((response) => {\r\n\r\n                setServerPostResponse(response.data.result);\r\n\r\n            })\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n      }\r\n\r\n      const handleSendImage = async () => {\r\n        createPost(postImage)\r\n        console.log(postImage)\r\n        console.log(\"uploaded\")\r\n      }\r\n\r\n      const handleFileUpload = async (e) => {\r\n\r\n        const file = e.target.files[0]\r\n\r\n        const base64 = await convertToBase64(file)\r\n        \r\n        setPostImage({...postImage, myFile : base64, name: loggedInNameValue })\r\n     \r\n      }\r\n\r\n      function convertToBase64(file){\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const fileReader = new FileReader();\r\n\r\n            fileReader.readAsDataURL(file)\r\n\r\n            fileReader.onload = () => {\r\n\r\n                resolve(fileReader.result)\r\n\r\n            };\r\n\r\n            fileReader.onerror = (error) => {\r\n                reject(error)\r\n            }\r\n        })\r\n      }\r\n\r\n\r\n\r\n      //This handles the change password\r\n      \r\n  \r\n    return(\r\n\r\n            <div className=\"profile-photo-setting-body\">\r\n\r\n                <h1>Settings...</h1>\r\n\r\n                <div className=\"setDiv\">\r\n\r\n                    <div className=\"photo-change\">\r\n\r\n                        <p>profile photo: </p>\r\n\r\n                            <p>{serverPostResponse}</p>\r\n\r\n                        <div className=\"pic-display\">\r\n  \r\n                        { postImage.myFile ? <img src={postImage.myFile} width=\"200px\"/> : <FaUser id=\"FaUser\"/> }\r\n\r\n                        </div>\r\n\r\n                        <div className=\"imageSelect-and-sendBtn-div\">\r\n                        <input type=\"file\" name=\"myFile\" className=\"imageSelect\" onChange={ handleFileUpload } accept=\"jpeg, .png, .jpg\"/> \r\n                        <button onClick={handleSendImage} className=\"photoBtn\">save picture</button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n\r\n\r\n\r\n          </div>\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default ProfilePhotoSetting;"],"mappings":"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"},"metadata":{},"sourceType":"module"}